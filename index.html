---
layout: default
title: AMi Home
---

<div class="container">
    <h1 class="text-center h1">AMi: an <u>A</u>utomated <u>Mi</u>croscope system for imaging plates</h1>
</div>

<div class="container py-3">
    <div class="row">
        <div class="col-md-7">
            <p>This site describes the construction and use of an 
                inexpensive, automated microscope system for 
                imaging samples in multi-well plates.  A paper 
                describing the original system is <a href="https://doi.org/10.1107/S2053230X18016515">here</a>, and one 
                describing a less expensive, more stable device 
                that includes a dedicated graphical user interface 
                is <a href="http://scripts.iucr.org/cgi-bin/paper?ft5102">here</a>. Updates to the design and software will be 
                posted to this site as they become available. </p>
            <p>Please see the <a href="{{ '/faqs' | relative_url }}">FAQs</a> before writing me with questions.</p>
            <p>We normally use this system to search for protein 
                crystals in 96 well plates, but it can easily be 
                programmed to image samples in 12 or 24 well plates 
                as well. Plates with more than one sample at each 
                row/column index are also supported. The 
                computer-controlled stage yields reproducible 3D
                movements of 160 mm in x, 100 mm in y, and 40mm in z. 
                To highlight what else is possible, here are a few 
                images of some non-crystalline <a href="/other_samples.html">samples</a>.</p>
        </div>
        <div class="col-md-5">
            <figure class="figure">
                <img src="{{ 'assets/images/current.gif' | relative_url }}" class="figure-img img-fluid rounded" alt="Current version">
                <figcaption class="figure-caption text-center">Current version of the AMi microscope system</figcaption>
            </figure>
        </div>
    </div>
</div>

<div class="container py-3">
    <h2 class="h2">Hardware Summary (<a href="{{ 'assets/documents/hardware.pdf' | relative_url }}">DETAILS</a>)</h2>
    <div class="row">
        <div class="col-md-7">
            <p>The 3D translation stage is built from the light-duty CNC machine (~$135) shown on the right. The original machine allowed computer-controlled translation of the rotary cutting tool in X and Z, and translation of the object being cut along Y.</p>
            <p>To convert the CNC machine to a 3D microscope stage, you’ll need to rearrange the parts, add some new, 3D printed parts, and screw the whole thing to stable base. You will also need to add a sample holder in place of the cutting tool, securely mount a microscope and camera, and connect the camera such that images can be triggered by the arduino-based board that drives the CNC machine. Construction requires a small amount of soldering, and some of the parts that hold the microscope and sample holder are 3D printed. You will also need access to a table saw and drill press.</p>
            <p>The <a href="{{ 'assets/documents/hardware.pdf' | relative_url }}">DETAILS</a> page provides much more information.</p>
            <p>Plans for the 3D printed parts are <a href="{{ 'assets/misc/parts.tar' | relative_url }}">HERE</a>.</p>
        </div>
        <div class="col-md-5">
            <figure class="figure">
                <img src="{{ 'assets/images/cncmachine.png' | relative_url }}" class="figure-img img-fluid rounded" alt="Model 1610 CNC Machine">
                <figcaption class="figure-caption text-center">Model 1610 CNC Machine</figcaption>
            </figure>
        </div>
    </div>
    <div class="row">
        <div class="col-md-7">
            <p>As shown on the right, it is possible to use the AMi translation stage with an existing microscope. To fully integrate the system, you’ll need to mount the picamera (an inexpensive board-based sensor chip) in place of the camera shown. 3D printing files for a C-mount adapter that will couple many microscopes to the picamera can be found with the other plans below.</p>
            <p>Be careful. Some microscopes may tip in this configuration! Also, any movement between the microscope and the stage will necessitate recalibration. The calibration procedure is described in the details link below If you’re using existing optics, my recommendation is that you mount the microscope pole to the base of the translation stage rather than have is physically separated as in the photo.</p>
        </div>
        <div class="col-md-5">
            <figure class="figure">
                <img src="{{ 'assets/images/hardware.png' | relative_url }}" class="figure-img img-fluid rounded" alt="Model 1610 CNC Machine">
            </figure>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <figure class="figure">
                <img src="{{ 'assets/images/componentconnections.gif' | relative_url }}" class="figure-img img-fluid rounded" alt="Model 1610 CNC Machine">
                <figcaption class="figure-caption text-center">Connections between the component parts</figcaption>
            </figure>
        </div>
        <div class="col-md-2"></div>
    </div>
</div>

<div class="container py-3">
    <h2 class="h2">Software Summary (<a href="{{ 'assets/documents/software.pdf' | relative_url }}">DETAILS</a>)</h2>
    <div class="row">
        <div class="col-md-7">
            <p>3D printers and CNC machines use a text-based language known as G-code to control their movements. In the AMi system, a python-Tk based graphical user interface named AMiGUI controls the movements of the plate beneath the microscope and triggers acquisition of images of each sample. AMiGUI controls the translation stage through G-code commands. The AMiGUI software can be used to image an entire plate automatically, or it can be used to look at the sample drops manually in real time.</p>
            <p>(<a href="{{ 'assets/misc/AMiGUI.py' | relative_url }}">HERE</a>) is the link for the AMiGUI.py program. To run it type “python3 AMiGUI.py”</p>
            <p>If you would like to take multiple images spaced in Z, you can do so by specifying the number of images and the spacing between them in mm. These parameters are entered in the lower right part of the graphical user interface. When multiple z-stacked images are collected, a command file for automatically converting these images to a singe image with digitally enhanced depth of field is written in the same directory. The script requires that the program Enfuse, which is part of the Open Source <a href="http://hugin.sourceforge.net/">Hugin</a> package be installed.</p>
            <p>AMi can also image plates with more than one sample well at each row/column index (i.e. a 96 well plate with three sample wells at each of the 96 positions). See the DETAILS link for more information.</p>

            <h3 class="h3">Using the System (<a href="{{ 'assets/documents/use.pdf' | relative_url }}">DETAILS</a>)</h3>
            <p><u>Sample movement:</u> The top part of the interface allows the plate to be moved beneath the microscope. Movements in X and Y are controlled by the part of the GUI that looks like a crosshair. Clicking in the Z-translation section changes the focus.</p>
            <p><u>Alignment:</u> The system needs to know the precise positions of the four corner samples before automated imaging can commence. The TL, TR, BL, and BL buttons move the view to the top-left, top-right, bottom-left, and bottom-right samples, respectively. At each position, users can make small adjustments in centering and focus and then click SET to save the save the precise coordinates.</p>
            <p><u>Mannual operation:</u> Once aligned, pushing the next and prev buttons move from drop to drop (i.e. A11> A12> B1> B2). Right-clicking these buttons moves up and down a row (i.e. D5 > E5). You can also enter a position (i.e. F11) and go right there. Left clicking the Snap Image button captures a single image. Right clicking the button collects a Z-stack of images.</p>
            <p><u>Automated imaging:</u> Clicking the RUN button initiates automated imaging of the entire plate. Normally a z-stack of images is collected at each position, and a custom command file is written for depth of field enhancement.</p>
        </div>
        <div class="col-md-5">
            <figure class="figure">
                <img src="{{ 'assets/images/software.gif' | relative_url }}" class="figure-img img-fluid rounded" alt="GUI">
                <figcaption class="figure-caption text-center">The AMiGUI graphical user interface is used to make manual movements, update the calibration file, manual inspect samples, take snapshots and automatically image the entire plate.</figcaption>
            </figure>
        </div>
    </div>
</div>

<div class="container py-3">
    <h2 class="h2">Image enhancement example:</h2>
    <div class="row">
        <div class="col-md-7">
            <p>The digital image enhancement serves two purposes:  First, it increases the depth of field.  Second, it relieves the necessity of having every drop perfectly in focus.  The software takes a z-stack (i.e. 3 images separated by 0.15 mm as shown) and creates a single image that contains the sharpest features of all of them.     The image on the right is one such image. The largest crystals are approximately 40 microns in length.</p>
        </div>
        <div class="col-md-5">
            <figure class="figure">
                <img src="{{ 'assets/images/enhancedimage.gif' | relative_url }}" class="figure-img img-fluid rounded" alt="Enhanced Image">
                <figcaption class="figure-caption text-center">Digitally enhanced image produced from three pictures separated by 0.15 mm.</figcaption>
            </figure>
        </div>
    </div>
    
    <div class="row">
        <p>The three parent images are shown at below. These images are 2MP images, so the actual resolution is better than what you see.</p>
        <div class="col-md-4">
            <figure class="figure">
                <img src="{{ 'assets/images/enhancedimage_parent1.gif' | relative_url }}" class="figure-img img-fluid rounded" alt="Enhanced Image Parent 1">
            </figure>
        </div>
        <div class="col-md-4">
            <figure class="figure">
                <img src="{{ 'assets/images/enhancedimage_parent2.gif' | relative_url }}" class="figure-img img-fluid rounded" alt="Enhanced Image Parent 2">
            </figure>
        </div>
        <div class="col-md-4">
            <figure class="figure">
                <img src="{{ 'assets/images/enhancedimage_parent3.gif' | relative_url }}" class="figure-img img-fluid rounded" alt="Enhanced Image Parent 3">
            </figure>
        </div>
    </div>
</div>

<div class="container py-3">
    <h2 class="h2">Future plans:</h2>
    <p>I hope to make a variety of improvements to the device and I welcome input and technical help.</p>
    <p>Future plans are described <a href="future_plans.html">here</a>.</p>
</div>

<div class="container py-3">
    <h2 class="h2">Disclaimer:</h2>
    <p>All warranties are disclaimed, including warranty of non-infringement.</p>
</div>

<div class="container py-3">
    <h2 class="h2">Changes and updates:</h2>
    <p>The entire site was updated to describe the new version of the microscope with the GUI in July, 2019.</p>
</div>